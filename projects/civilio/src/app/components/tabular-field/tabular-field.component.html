<!--<form [formGroup]="form">-->
<div hlmTableContainer>
	<table class="caption-top" hlmTable>
		<caption class="py-1 h-[35px] m-0 px-2 sticky top-0 backdrop-blur-md" hlmCaption>
			<div class="flex items-center m-0 justify-between">
				<p class="text-lg font-semibold">
					{{ title() | translate }}
				</p>
				@if (enableMutation()) {
					<div class="flex items-center gap-3">
						@if (editing()) {
							<button
								type="button"
								[disabled]="
							maxRows() === undefined ? false : $any(maxRows()) <= data().length
						"
								size="icon"
								variant="outline"
								(click)="addRow()"
								hlmBtn
								[title]="'tmpl.table.actions.add_new.description' | translate"
							>
								<ng-icon name="lucidePlus"/>
								<!--								<span>{{  }}</span>-->
							</button>
							@if (changesTracked()) {
								<button [disabled]="!changesTracked()" [title]="'forms.header.actions.discard' | translate"
												hlmBtn size="icon" type="button" variant="destructive">
									<ng-icon name="lucideTrash2"/>
									<!--									<span>{{  }}</span>-->
								</button>
							} @else {
								<button (click)="editing.set(false)" [title]="'tmpl.table.actions.cancel' | translate" hlmBtn
												size="icon"
												type="button" variant="outline">
									<ng-icon name="lucideX"/>
									<!--									<span>{{  }}</span>-->
								</button>
							}
						} @else {
							<button (click)="editing.set(true)" hlmBtn size="sm" type="button" variant="outline">
								<ng-icon name="lucidePencil"/>
								<span>{{ 'tmpl.table.actions.enable_mutation.title' | translate }}</span>
							</button>
						}
					</div>
				}
			</div>
		</caption>
		<thead class="sticky top-[35px] backdrop-blur-md" hlmTHead>
			@for (hg of tableDefinition().getHeaderGroups(); track hg.id) {
				<tr hlmTr>
					@for (header of hg.headers; track header.id) {
						<th [attr.colspan]="header.colSpan" hlmTh>
							@if (!header.isPlaceholder) {
								<ng-container
									*flexRender="header.column.columnDef.header; props: header.getContext(); let headerText">
									<span>{{ headerText | translate }}</span>
								</ng-container>
							}
						</th>
					}
				</tr>
			}
		</thead>
		<tbody hlmTBody>
			@for (row of tableDefinition().getRowModel().rows; track row.id) {
				<!--suppress HtmlUnknownAttribute -->
				<tr [attr.data-state]="row.getIsSelected() && 'selected'" [attr.key]="row.id" hlmTr>
					@for (cell of row.getVisibleCells(); track $index) {
						<td class="overflow-x-hidden" hlmTd>
							<div *flexRender="cell.column.columnDef.cell; props: cell.getContext(); let cell"
									 class="max-w-full [{{cell.column.columnDef.maxSize}}px]">
								{{ cell }}
							</div>
						</td>
					}
				</tr>
			} @empty {
				<tr hlmTr>
					<td
						[attr.colspan]="columnDefinitions().length"
						class="h-24 text-center"
						hlmTd
					>
						{{ "tmpl.table.no_data" | translate }}
					</td>
				</tr>
			}
		</tbody>
	</table>
</div>
<!--</form>-->
