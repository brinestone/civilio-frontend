{
  "id": "c144d335-c34f-422b-aaef-abec5283551d",
  "prevId": "975084d4-5d0b-4eeb-adbc-52639f12b3b3",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "civilio.choices": {
      "name": "choices",
      "schema": "civilio",
      "columns": {
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "label": {
          "name": "label",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "parent": {
          "name": "parent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "group": {
          "name": "group",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "i18n_key": {
          "name": "i18n_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "form_types",
          "typeSchema": "civilio",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "choices_pkey": {
          "name": "choices_pkey",
          "columns": [
            "name",
            "group",
            "version"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "civilio.form_field_mappings": {
      "name": "form_field_mappings",
      "schema": "civilio",
      "columns": {
        "field": {
          "name": "field",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "i18n_key": {
          "name": "i18n_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "db_column": {
          "name": "db_column",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "db_table": {
          "name": "db_table",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "form": {
          "name": "form",
          "type": "form_types",
          "typeSchema": "civilio",
          "primaryKey": false,
          "notNull": true
        },
        "db_column_type": {
          "name": "db_column_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "alias_hash": {
          "name": "alias_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "md5(\"civilio\".\"form_field_mappings\".\"field\")",
            "type": "stored"
          }
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "field_db_column_db_table_form_pk": {
          "name": "field_db_column_db_table_form_pk",
          "columns": [
            "field",
            "form"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "civilio.migrations": {
      "name": "migrations",
      "schema": "civilio",
      "columns": {
        "_version": {
          "name": "_version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "applied_at": {
          "name": "applied_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "civilio.validation_codes": {
      "name": "validation_codes",
      "schema": "civilio",
      "columns": {
        "form": {
          "name": "form",
          "type": "form_types",
          "typeSchema": "civilio",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "validation_codes_code_key": {
          "name": "validation_codes_code_key",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "civilio.form_types": {
      "name": "form_types",
      "schema": "civilio",
      "values": [
        "fosa",
        "chefferie",
        "csc"
      ]
    }
  },
  "schemas": {
    "civilio": "civilio"
  },
  "sequences": {
    "civilio.chefferie_id_seq": {
      "name": "chefferie_id_seq",
      "schema": "civilio",
      "increment": "1",
      "startWith": "457502754",
      "minValue": "1",
      "maxValue": "9223372036854775807",
      "cache": "1",
      "cycle": false
    },
    "civilio.chefferie_index_seq": {
      "name": "chefferie_index_seq",
      "schema": "civilio",
      "increment": "1",
      "startWith": "324",
      "minValue": "1",
      "maxValue": "9223372036854775807",
      "cache": "1",
      "cycle": false
    },
    "civilio.chefferie_personnel_index_seq": {
      "name": "chefferie_personnel_index_seq",
      "schema": "civilio",
      "increment": "1",
      "startWith": "186",
      "minValue": "1",
      "maxValue": "9223372036854775807",
      "cache": "1",
      "cycle": false
    },
    "civilio.csc_id_seq": {
      "name": "csc_id_seq",
      "schema": "civilio",
      "increment": "1",
      "startWith": "475016321",
      "minValue": "1",
      "maxValue": "9223372036854775807",
      "cache": "1",
      "cycle": false
    },
    "civilio.csc_index_seq": {
      "name": "csc_index_seq",
      "schema": "civilio",
      "increment": "1",
      "startWith": "445",
      "minValue": "1",
      "maxValue": "9223372036854775807",
      "cache": "1",
      "cycle": false
    },
    "civilio.csc_personnel_index_seq": {
      "name": "csc_personnel_index_seq",
      "schema": "civilio",
      "increment": "1",
      "startWith": "774",
      "minValue": "1",
      "maxValue": "9223372036854775807",
      "cache": "1",
      "cycle": false
    },
    "civilio.csc_pieces_index_seq": {
      "name": "csc_pieces_index_seq",
      "schema": "civilio",
      "increment": "1",
      "startWith": "543",
      "minValue": "1",
      "maxValue": "9223372036854775807",
      "cache": "1",
      "cycle": false
    },
    "civilio.csc_statistics_index_seq": {
      "name": "csc_statistics_index_seq",
      "schema": "civilio",
      "increment": "1",
      "startWith": "1463",
      "minValue": "1",
      "maxValue": "9223372036854775807",
      "cache": "1",
      "cycle": false
    },
    "civilio.csc_villages_seq": {
      "name": "csc_villages_seq",
      "schema": "civilio",
      "increment": "1",
      "startWith": "2344",
      "minValue": "1",
      "maxValue": "9223372036854775807",
      "cache": "1",
      "cycle": false
    },
    "civilio.fosa_id_seq": {
      "name": "fosa_id_seq",
      "schema": "civilio",
      "increment": "1",
      "startWith": "484119070",
      "minValue": "1",
      "maxValue": "9223372036854775807",
      "cache": "1",
      "cycle": false
    },
    "civilio.fosa_index_seq": {
      "name": "fosa_index_seq",
      "schema": "civilio",
      "increment": "1",
      "startWith": "971",
      "minValue": "1",
      "maxValue": "9223372036854775807",
      "cache": "1",
      "cycle": false
    },
    "civilio.fosa_personnel_index_seq": {
      "name": "fosa_personnel_index_seq",
      "schema": "civilio",
      "increment": "1",
      "startWith": "1261",
      "minValue": "1",
      "maxValue": "9223372036854775807",
      "cache": "1",
      "cycle": false
    }
  },
  "roles": {},
  "policies": {},
  "views": {
    "civilio.vw_db_columns": {
      "columns": {
        "column_name": {
          "name": "column_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "data_type": {
          "name": "data_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "table_name": {
          "name": "table_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "form": {
          "name": "form",
          "type": "form_types",
          "typeSchema": "civilio",
          "primaryKey": false,
          "notNull": false
        }
      },
      "definition": "SELECT c.column_name, c.data_type, c.table_name, CAST(c.table_schema as \"civilio\".\"form_types\") as form FROM information_schema.columns c WHERE c.table_schema in ('fosa', 'chefferie', 'csc')",
      "name": "vw_db_columns",
      "schema": "civilio",
      "isExisting": false,
      "materialized": false
    },
    "civilio.vw_submissions": {
      "columns": {
        "_id": {
          "name": "_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "_index": {
          "name": "_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "_validation_status": {
          "name": "_validation_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "validation_code": {
          "name": "validation_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "facility_name": {
          "name": "facility_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "_submission_time": {
          "name": "_submission_time",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "form": {
          "name": "form",
          "type": "form_types",
          "typeSchema": "civilio",
          "primaryKey": false,
          "notNull": false
        },
        "next": {
          "name": "next",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "prev": {
          "name": "prev",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_valid": {
          "name": "is_valid",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        }
      },
      "definition": "SELECT _id, _index, _validation_status, validation_code, facility_name, _submission_time, form, next, prev, lower(COALESCE(_validation_status, ''::text)) = 'validation_status_approved'::text AS is_valid FROM ( SELECT df._id::double precision::integer AS _id, df._index, df._validation_status::text AS _validation_status, df.code_de_validation::text AS validation_code, df.q2_4_officename::text AS facility_name, df._submission_time::date AS _submission_time, ( SELECT 'csc'::civilio.form_types AS form_types) AS form, lead(df._index) OVER (ORDER BY df._index) AS next, lag(df._index) OVER (ORDER BY df._index) AS prev FROM csc.data df UNION SELECT df._id::double precision::integer AS _id, df._index, df._validation_status::text AS _validation_status, df.q14_02_validation_code::text AS validation_code, df.q1_12_officename::text AS facility_name, df._submission_time, ( SELECT 'fosa'::civilio.form_types AS form_types) AS form, lead(df._index) OVER (ORDER BY df._index) AS next, lag(df._index) OVER (ORDER BY df._index) AS prev FROM fosa.data df UNION SELECT df._id::double precision::integer AS _id, df._index, df._validation_status::text AS _validation_status, df.q14_02_validation_code::text AS validation_code, df.q1_12_officename::text AS facility_name, df._submission_time, ( SELECT 'chefferie'::civilio.form_types AS form_types) AS form, lead(df._index) OVER (ORDER BY df._index) AS next, lag(df._index) OVER (ORDER BY df._index) AS prev FROM chefferie.data df) result ORDER BY _submission_time DESC",
      "name": "vw_submissions",
      "schema": "civilio",
      "isExisting": false,
      "materialized": false
    }
  },
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}